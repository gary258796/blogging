<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-System Design/Integration/redis/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Redis Quick Start (With Sentinel Mode) | Gary Liao&#x27;s Blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://gary258796.github.io/blogging/System Design/Integration/redis/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Redis Quick Start (With Sentinel Mode) | Gary Liao&#x27;s Blog"><meta data-rh="true" name="description" content="Quick start with redis sentinel"><meta data-rh="true" property="og:description" content="Quick start with redis sentinel"><meta data-rh="true" name="keywords" content="Redis,Sentinel,in-memory cache"><link data-rh="true" rel="icon" href="/blogging/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://gary258796.github.io/blogging/System Design/Integration/redis/"><link data-rh="true" rel="alternate" href="https://gary258796.github.io/blogging/System Design/Integration/redis/" hreflang="en"><link data-rh="true" rel="alternate" href="https://gary258796.github.io/blogging/System Design/Integration/redis/" hreflang="x-default"><link rel="stylesheet" href="/blogging/assets/css/styles.833a26ba.css">
<link rel="preload" href="/blogging/assets/js/runtime~main.b26980dc.js" as="script">
<link rel="preload" href="/blogging/assets/js/main.842871c4.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/blogging/intro"><div class="navbar__logo"><img src="/blogging/img/logo.svg" alt="Gary Liao&#x27;s site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/blogging/img/logo.svg" alt="Gary Liao&#x27;s site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">My Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blogging/intro">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/gary258796" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/blogging/intro">Gary Liao&#x27;s Blog</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/blogging/2021面試整理/1/">2021面試整理</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/blogging/Aws/Ec2+Apache Web Server/">Aws</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/blogging/Http/Cache/">Http</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/blogging/System Design/Integration/redis/">System Design</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/blogging/System Design/Integration/redis/">Integration</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/blogging/System Design/Integration/redis/">Redis Quick Start (With Sentinel Mode)</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/blogging/vscode/sonarlint">VsCode</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/blogging/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">System Design</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Integration</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Redis Quick Start (With Sentinel Mode)</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Redis Quick Start (With Sentinel Mode)</h1></header><p>近期工作專案上，接觸並且在系統架構之中使用到 Redis ，剛好我需要負責將測試環境之 Redis 哨兵模式架起以及相關設定、與專案程式整合...等。
趁這個機會將筆記記錄到此，方便以後查看。</p><p><img loading="lazy" alt="RedisCacheImage" src="data:image/png;base64,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" width="1460" height="730" class="img_ev3q">
Image Source : <a href="https://kinsta.com/docs/redis-cache/" target="_blank" rel="noopener noreferrer">Redis Article</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="前言">前言<a class="hash-link" href="#前言" title="Direct link to heading">​</a></h2><p>Redis 是個 in-memory 的資料存儲系統，有低延遲、回應時間快等特性。很適合作為比如 Cache 的應用。詳細 Redis 的介紹，因為不是本篇著重之地方，就不贅述。可參考 <a href="https://redis.io/" target="_blank" rel="noopener noreferrer">Redis 官網</a> </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sentinel-架構">Sentinel 架構<a class="hash-link" href="#sentinel-架構" title="Direct link to heading">​</a></h2><p>在說明 Sentinel (哨兵模式) 之前，我們先來說說 Redis 的 Master Slave (主從模式)。</p><p>主從模式會將 Redis 節點分為 Master 以及 Slave 節點。 所有寫入只能夠交給 Master 進行，將讀寫分離。 Slave 則只能夠負責讀取資料。 </p><p><img loading="lazy" alt="Redis-Master-Slave" src="/blogging/assets/images/redis-master-slave-bcae2036c751df845fb10969ddf30bc2.png" width="860" height="606" class="img_ev3q">  </p><p>而哨兵模式則是在 Master-Slave 架構上之延伸。除了原本 Master-Salve 之節點以外，還多了 Sentinel 節點去負責監控 Master、自動失效處理...等，提升系統的高可用性。</p><p>當 Master 結點不論是真的失效了或者可能是暫時的網路不穩而被哨兵們懷疑失效了，哨兵們就會透過共識機制判定是否真的失效。如果真的失效，會再透過選舉的方式將原本某個 Slave 節點推舉為新的 Master 節點。</p><p>而原本之 Master 節點如果後來恢復運行，就會以 Slave 的身份繼續進行。</p><p><img loading="lazy" alt="Redis-Sentinel" src="/blogging/assets/images/redis-sentinel-f3cb9b731a9f66489ef47b19f9a35847.png" width="860" height="900" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="本機環境架設">本機環境架設<a class="hash-link" href="#本機環境架設" title="Direct link to heading">​</a></h2><p>接下來使用本機嘗試架設起 Redis Sentinel 來玩玩。
我們總共將會架起 1 Master + 2 Slave 為我們的主從模式之 Redis 節點。並在這個之上架設 3 Sentinel 節點。</p><ol><li><p>將所有 Sentinel, Master, Slave 節點都安裝在本機上</p><ul><li>在自己機器上，安裝 Redis 。 我自己是 Mac ，所以透過 Brew 指定將 Redis 安裝到我本機上。</li><li>Redis 節點之 Config 檔案請參考  <ul><li><a target="_blank" href="/blogging/assets/files/redis-1-ded9b3a51fe1e87a82f928fbbff477da.conf">Redis-Master</a></li><li><a target="_blank" href="/blogging/assets/files/redis-2-80a1b146258e28abde4c06cd73c38ae1.conf">Redis-Slave1</a></li><li><a target="_blank" href="/blogging/assets/files/redis-3-eaed73b0bca5b7f3856fedc7c9503d72.conf">Redis-Slave2</a></li><li><a target="_blank" href="/blogging/assets/files/redis-sentinel-1-4c2bb9d9f16ab653ef098ad409865210.conf">Redis-Sentinel1</a></li><li><a target="_blank" href="/blogging/assets/files/redis-sentinel-2-3ec160304dc2d01296de142f8a899770.conf">Redis-Sentinel2</a></li><li><a target="_blank" href="/blogging/assets/files/redis-sentinel-3-3678c380886bc978ec0c6f57a4cf5076.conf">Redis-Sentinel3</a></li></ul></li><li>使用 ReadMe 檔案中提供之指令
<a target="_blank" href="/blogging/assets/files/readme-6e4df22b4b13db552032cc449fb2f9ad.txt">View README</a></li></ul></li><li><p>因為在本機一個一個節點啟動太麻煩，所以後來都選擇使用 Docker Compose 之方式，一次將所有需要之節點啟動。</p><ul><li><a target="_blank" href="/blogging/assets/files/docker-compose-2125617655b3fb03cf0f416d1a1ec7f2.yml">Docker Compose File</a></li><li><a target="_blank" href="/blogging/assets/files/redis-1-3ef98c2ed70848a3448e105841400e9c.conf">Redis-Master</a></li><li><a target="_blank" href="/blogging/assets/files/redis-2-2844bd3ca5a737d2c6c25b23cc6cf4c0.conf">Redis-Slave1</a></li><li><a target="_blank" href="/blogging/assets/files/redis-3-2603db802d796a8102b3dba900385880.conf">Redis-Slave2</a></li><li><a target="_blank" href="/blogging/assets/files/redis-sentinel-1-89992b3a38282f2e6da784a935d904ba.conf">Redis-Sentinel1</a></li><li><a target="_blank" href="/blogging/assets/files/redis-sentinel-2-7f33f23082889c36d598e8e42a78aaa1.conf">Redis-Sentinel2</a></li><li><a target="_blank" href="/blogging/assets/files/redis-sentinel-3-d56ca1a54b811b4d8ef80c38847852d3.conf">Redis-Sentinel3</a></li></ul></li></ol><p>不論使用什麼方式啟動，在啟動之後可透過 Redis-cli 的方式檢驗架設狀況。  </p><p>於任一 Sentinel 節點上執行指令 INFO SENTINEL，如果架設沒有問題，應該會看到類似如下之資訊。<br>
<!-- -->重點在於，最後面 sentinels=3 之數字應該要為 3，有時候安裝上如果有問題，這個數字就不會是 3。要多加注意。</p><p><img loading="lazy" alt="Redis-Sentinel-Info-Output" src="/blogging/assets/images/redis-sentinel-INFOSENTINEL-595608547a51fd8c9bfad09157615a36.png" width="878" height="172" class="img_ev3q">  </p><p>於任一 Sentinel 節點上執行指令 SENTINEL masters。如果架設沒有問題，應該會看到 num-salves = 2 以及 num-other-sentinels = 2 。</p><p><img loading="lazy" alt="Redis-Sentinel-masters-Output" src="/blogging/assets/images/redis-sentinel-masters-5114b7a07cea6576cd3401f0315749eb.png" width="614" height="866" class="img_ev3q">  </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="springboot-與-redis-以及-redis-sentinel-整合">SpringBoot 與 Redis 以及 Redis Sentinel 整合<a class="hash-link" href="#springboot-與-redis-以及-redis-sentinel-整合" title="Direct link to heading">​</a></h2><p>直接使用<a href="https://docs.spring.io/spring-data/data-redis/docs/current/reference/html/" target="_blank" rel="noopener noreferrer">Spring-data-redis</a>。 使用上非常方便，我們只需要照著 Spring 的文件在  Maven 引入後，很快就可以將 Spring Application 跑起來。</p><p>重點是在於配置 JedisConnectionFactory Bean 的時候，我們需要去配置 Sentinel 的 RedisSentinelConfiguration 來提供給 JedisConnectionFactory 做使用。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    JedisConnectionFactory jedisSentinelConnectionFactory(RedisProperties redisProperties,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    JedisClientConfiguration clientConfig) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String master = redisProperties.getSentinel().getMaster();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Set&lt;String&gt; sentinelNodes = Set.copyOf(redisProperties.getSentinel().getNodes());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        RedisSentinelConfiguration sentinelConfig = new RedisSentinelConfiguration(master, sentinelNodes);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return new JedisConnectionFactory(sentinelConfig, clientConfig);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>因為 Spring-data-redis 裏面之 RedisProperties 已將所有會用到之設定都定義好，我們只需要將需要用到之如 Sentinel 相關資訊在 SpringBoot 中的 yaml 或者 properties 檔加上即可。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="參考文章">參考文章<a class="hash-link" href="#參考文章" title="Direct link to heading">​</a></h3><ol><li><a href="https://hackmd.io/@tienyulin/redis-master-slave-replication-sentinel-cluster" target="_blank" rel="noopener noreferrer">Redis (六) - 主從複製、哨兵與叢集模式</a></li></ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blogging/tags/redis">Redis</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blogging/tags/sentinel">Sentinel</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blogging/tags/high-availability">High Availability</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-08-06T00:00:00.000Z">Aug 6, 2023</time></b> by <b>Gary Liao</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blogging/Http/Cookie/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">[headers] Set-Cookie - SameSite</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blogging/vscode/sonarlint"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Sonarlint 安裝設定</div></a></nav></div><br></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#前言" class="table-of-contents__link toc-highlight">前言</a></li><li><a href="#sentinel-架構" class="table-of-contents__link toc-highlight">Sentinel 架構</a></li><li><a href="#本機環境架設" class="table-of-contents__link toc-highlight">本機環境架設</a></li><li><a href="#springboot-與-redis-以及-redis-sentinel-整合" class="table-of-contents__link toc-highlight">SpringBoot 與 Redis 以及 Redis Sentinel 整合</a><ul><li><a href="#參考文章" class="table-of-contents__link toc-highlight">參考文章</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blogging/docs/intro">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/users/12973717/gary-liao" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/in/garyliao" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/gary258796" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Gary Liao. Built with Docusaurus.</div></div></div></footer></div>
<script src="/blogging/assets/js/runtime~main.b26980dc.js"></script>
<script src="/blogging/assets/js/main.842871c4.js"></script>
</body>
</html>