"use strict";(self.webpackChunkgary_blog=self.webpackChunkgary_blog||[]).push([[873],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>d});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var o=r.createContext({}),m=function(e){var t=r.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},c=function(e){var t=m(e.components);return r.createElement(o.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,o=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),h=m(a),d=n,k=h["".concat(o,".").concat(d)]||h[d]||s[d]||i;return a?r.createElement(k,l(l({ref:t},c),{},{components:a})):r.createElement(k,l({ref:t},c))}));function d(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,l=new Array(i);l[0]=h;var p={};for(var o in t)hasOwnProperty.call(t,o)&&(p[o]=t[o]);p.originalType=e,p.mdxType="string"==typeof e?e:n,l[1]=p;for(var m=2;m<i;m++)l[m]=a[m];return r.createElement.apply(null,l)}return r.createElement.apply(null,a)}h.displayName="MDXCreateElement"},2053:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>s,frontMatter:()=>i,metadata:()=>p,toc:()=>m});var r=a(7462),n=(a(7294),a(3905));const i={title:"Cache",keywords:["http","cache","http cache"],description:"http cache machanism",tags:["Http","Cache"],last_update:{date:"6/27/2021",author:"Gary Liao"}},l=void 0,p={unversionedId:"Http/Cache/index",id:"Http/Cache/index",title:"Cache",description:"http cache machanism",source:"@site/docs/Http/Cache/index.md",sourceDirName:"Http/Cache",slug:"/Http/Cache/",permalink:"/blogging/Http/Cache/",draft:!1,tags:[{label:"Http",permalink:"/blogging/tags/http"},{label:"Cache",permalink:"/blogging/tags/cache"}],version:"current",lastUpdatedBy:"Gary Liao",lastUpdatedAt:1624752e3,formattedLastUpdatedAt:"Jun 27, 2021",frontMatter:{title:"Cache",keywords:["http","cache","http cache"],description:"http cache machanism",tags:["Http","Cache"],last_update:{date:"6/27/2021",author:"Gary Liao"}},sidebar:"tutorialSidebar",previous:{title:"[Aws] Apache Web Server + SSL on AWS EC2 instance",permalink:"/blogging/Aws/Ec2+Apache Web Server/"},next:{title:"[headers] Set-Cookie - SameSite",permalink:"/blogging/Http/Cookie/"}},o={},m=[{value:"\u524d\u8a00",id:"\u524d\u8a00",level:2},{value:"Client \u548c Server \u6e9d\u901a\u7c21\u6613\u6d41\u7a0b",id:"client-\u548c-server-\u6e9d\u901a\u7c21\u6613\u6d41\u7a0b",level:2},{value:"\u6c7a\u5b9aheader",id:"\u6c7a\u5b9aheader",level:2},{value:"\u8207 http cache\u76f8\u95dc\u4e4bheaders",id:"\u8207-http-cache\u76f8\u95dc\u4e4bheaders",level:2},{value:"\u7d50\u8a9e",id:"\u7d50\u8a9e",level:2},{value:"\u63a8\u85a6\u95b1\u8b80",id:"\u63a8\u85a6\u95b1\u8b80",level:3},{value:"\u53c3\u8003\u6587\u7ae0",id:"\u53c3\u8003\u6587\u7ae0",level:3}],c={toc:m};function s(e){let{components:t,...i}=e;return(0,n.kt)("wrapper",(0,r.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"\u7531\u65bc\u6700\u8fd1\u5728\u9762\u8a66\u627e\u5de5\u4f5c\uff0c\u624d\u767c\u73fe\u96d6\u7136\u81ea\u5df1\u8eab\u70ba\u7db2\u9801\u61c9\u7528\u7a0b\u5f0f\u958b\u767c\u8005\uff0c\u537b\u9084\u6c92\u6709\u597d\u597d\u77ad\u89e3\u904ehttp cache\u7684\u65b9\u5f0f\u3001\u6a5f\u5236\u7b49\u7b49\u3002  \u8d81\u8457\u9019\u6b21\u6a5f\u6703\uff0c\u8b93\u81ea\u5df1\u597d\u597d\u77ad\u89e3\u8a8d\u8b58\u4e00\u4e0b Http Cache\u76f8\u95dc\u539f\u7406\u3001\u6a5f\u5236\u3002"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"httpCacheImage",src:a(7189).Z,width:"3000",height:"1667"}),"\nImage Source : ",(0,n.kt)("a",{parentName:"p",href:"https://imagekit.io/blog/content/images/2020/01/1440_800-cache-control.png"},"Cache Control"),"."),(0,n.kt)("h2",{id:"\u524d\u8a00"},"\u524d\u8a00"),(0,n.kt)("p",null,"\u8eab\u70ba\u4e00\u4f4d\u7db2\u9801\u958b\u767c\u8005\uff0c\u4e0d\u8ad6\u8eab\u8655\u524d\u7aef\u6216\u8005\u5f8c\u7aef\uff0c\u77e5\u9053\u5982\u4f55\u8b93\u6574\u500b\u7db2\u9801\u61c9\u7528\u7a0b\u5f0f\u54c1\u8cea\u66f4\u9ad8\u3001\u4f7f\u7528\u8005\u9ad4\u9a57\u66f4\u597d\u7d55\u5c0d\u53ea\u6709\u597d\u8655\u6c92\u6709\u58de\u8655\u3002  "),(0,n.kt)("p",null,"\u800c\u73fe\u4eca\u7684\u5404\u700f\u89bd\u5668\u5373\u4fbf\u4e0d\u7279\u5225\u8a2d\u5b9a\uff0c\u4e5f\u6703\u70ba\u6211\u5011\u9078\u64c7\u5b83\u8a8d\u70ba\u7684\u6700\u597d\u5feb\u53d6\u7b56\u7565\u3002\u53ef\u5c0d\u65bc\u958b\u767c\u8005\uff0c\u6211\u5011\u5f88\u5927\u6982\u7387\u6703\u9700\u8981\u81ea\u5df1\u638c\u63a7\u3001\u5236\u5b9a\u5feb\u53d6\u6a5f\u5236\u3002\u4f86\u8b93\u6211\u5011\u7684\u7db2\u9801\u64c1\u6709\u66f4\u597d\u7684\u670d\u52d9\u54c1\u8cea\u3002  "),(0,n.kt)("p",null,"\u56e0\u6b64\u5c31\u8b93\u6211\u5011\u5c31\u4f86\u8a8d\u8b58\u770b\u770bHttp Cache\u5982\u4f55\u80fd\u5920\u5e6b\u52a9\u7db2\u9801\u63d0\u5347\u6548\u7387\uff0c\u4ee5\u53ca\u6e1b\u5c11\u4f3a\u670d\u5668\u7684\u8ca0\u64d4\u3002"),(0,n.kt)("h2",{id:"client-\u548c-server-\u6e9d\u901a\u7c21\u6613\u6d41\u7a0b"},"Client \u548c Server \u6e9d\u901a\u7c21\u6613\u6d41\u7a0b"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Client(\u700f\u89bd\u5668)\u5411Server\u9001\u51fa\u8acb\u6c42\u67d0\u500b\u8cc7\u6e90\uff0cEx: abc.css")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Server \u56de\u50b3abc.css\u4e26\u4e14\u900f\u904eETag\uff0cExpires\u7b49\u8cc7\u8a0a\u544a\u8a34\u700f\u89bd\u5668\u8acb\u4ed6\u53ef\u4ee5\u4fdd\u5b58\u8a72\u8cc7\u6e90\u5728\u5feb\u53d6\u3002")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u7576\u518d\u6b21\u9700\u8981\u7d22\u53d6abc.css\u6642\uff0c\u700f\u89bd\u5668\u6703\u5148\u8ddf\u5feb\u53d6\u78ba\u8a8d\uff0c\u5982\u679c\u6709\u5c31\u56de\u50b3\u7d66\u700f\u89bd\u5668\u3002")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u5feb\u53d6\u4e0a\u6c92\u6709\u5408\u9069\u7684\u6a94\u6848\u6642\uff0c\u5247\u5c07\u8acb\u6c42\u767c\u9001\u7d66Server\u3002"),(0,n.kt)("p",{parentName:"li"},"\u4ee5\u6b64\u9054\u5230",(0,n.kt)("strong",{parentName:"p"},"\u6e1b\u5c11\u7db2\u8def\u50b3\u8f38\u91cf"),"\uff0c",(0,n.kt)("strong",{parentName:"p"},"\u6e1b\u5c11\u4f7f\u7528\u8005\u7b49\u5f85\u6642\u9593"),"\uff0c",(0,n.kt)("strong",{parentName:"p"},"\u6e1b\u8f15\u4f3a\u670d\u5668\u8ca0\u64d4"),"\u4ee5\u53ca",(0,n.kt)("strong",{parentName:"p"},"\u63d0\u5347\u4f7f\u7528\u8005\u9ad4\u9a57"),"\u3002  "))),(0,n.kt)("h2",{id:"\u6c7a\u5b9aheader"},"\u6c7a\u5b9aheader"),(0,n.kt)("p",null,"\u5728\u6c7a\u5b9a\u4f7f\u7528\u4ec0\u9ebc\u5feb\u53d6\u7b56\u7565\u6642\uff0c\u53ef\u4ee5\u53c3\u8003\u4e0b\u9762\u7684\u6d41\u7a0b\u5716\u3002\u5e6b\u52a9\u6211\u5011\u7531\u5927\u65b9\u5411\u5230\u5c0f\u65b9\u5411\u6c7a\u5b9a\u4f7f\u7528\u54ea\u4e9bheader\u548cdirectives(\u6307\u4ee4)\u3002"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"httpCacheFlow",src:a(8227).Z,width:"650",height:"655"}),(0,n.kt)("br",{parentName:"p"}),"\n","Image Source : ",(0,n.kt)("a",{parentName:"p",href:"https://web.dev/http-cache/#flowchart",title:"Flow Chart"},"Guide for Caching and Http Cache Headers for Static Content"),"."),(0,n.kt)("h2",{id:"\u8207-http-cache\u76f8\u95dc\u4e4bheaders"},"\u8207 http cache\u76f8\u95dc\u4e4bheaders"),(0,n.kt)("p",null,"\u5728\u958b\u59cb\u8aaa\u660eheaders\u524d\u5fc5\u9808\u8981\u5148\u8aaa\u660e\u4e00\u4e9b\u6771\u897f\u3002\u9996\u5148\uff0c\u5feb\u53d6\u300e\u904e\u671f\u300f\u6216\u8005\u300e\u8d85\u904e\u6642\u9593\u4e0d\u65b0\u9bae\u300f\uff0c\u82f1\u6587\u70ba ",(0,n.kt)("strong",{parentName:"p"},"Stale"),"\u3002",(0,n.kt)("br",{parentName:"p"}),"\n","\u518d\u8005\uff0c\u7576\u5feb\u53d6\u70bastale\u6642\uff0c\u4e0d\u4ee3\u8868\u5931\u6548\u3001\u4e0d\u80fd\u518d\u88ab\u4f7f\u7528\u3002\u6b64\u6642\u6703\u914d\u5408\u63a5\u4e0b\u4f86\u63d0\u5230\u7684\u4e00\u4e9bheader\u8cc7\u8a0a\uff0c\u5982",(0,n.kt)("inlineCode",{parentName:"p"},"\x1dETag"),"\x1d\u3001",(0,n.kt)("inlineCode",{parentName:"p"},"\x1dLast-Modified"),"...\u7b49\uff0c\x1c\u5e6b\u52a9\u700f\u89bd\u5668\u4ee5\u53caServer\u6c7a\u5b9a\u662f\u5426\u80fd\u5920\u7e7c\u7e8c\u4f7f\u7528\u8a72\u5feb\u53d6\u6216\u8005\u91cd\u65b0\u767c\u9001\u4e00\u500b\u3002"),(0,n.kt)("hr",null),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"Expires"),"  "),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u6307\u5b9a\u4e00\u500b\u6642\u9593\u9ede\uff0c\u8cc7\u6e90\u5728\u6b64\u6642\u9593\u9ede\u5f8c\u6703\u88ab\u7576\u4f5c ",(0,n.kt)("strong",{parentName:"li"},"stale"),"\u3002  ",(0,n.kt)("admonition",{parentName:"li",title:"\u6ce8\u610f",type:"info"},(0,n.kt)("p",{parentName:"admonition"},"\u6839\u64da ",(0,n.kt)("a",{parentName:"p",href:"https://www.mnot.net/blog/2007/05/15/expires_max-age",title:"Expires vs Max-Age"},"Expires vs Max-Age")," \u4ee5\u53ca ",(0,n.kt)("a",{parentName:"p",href:"https://moz.com/blog/expires-headers-for-seo-why-you-should-think-twice-before-using-them",title:"Expires Header for SEO"},"Expires Headers for SEO"),"\uff0c\u5728\u4f7f\u7528\u6b64Header\u5fc5\u9808\u591a\u8003\u616e\u5e7e\u500b\u9762\u5411\uff0c\u907f\u514d\u53cd\u800c\u56e0\u6b64\u9020\u6210\u5c0d\u7db2\u7ad9\u7684\u8ca0\u9762\u5f71\u97ff\uff0c\u5982: \u56e0\u70ba\u5c07",(0,n.kt)("inlineCode",{parentName:"p"},"Expires"),"\u6642\u9593\u8a2d\u5b9a\u70ba\u592a\u9577\uff0c\u5c0e\u81f4\u67d0\u500b\u8cc7\u6e90\u5728\u66f4\u65b0\u5f8c\uff0c\u537b\u56e0\u800c\u4e00\u76f4\u9084\u5728\u4f7f\u7528\u5feb\u53d6\u4e0a\u7684\u8cc7\u6e90\u3002\u4f46\u5f8c\u4f86'",(0,n.kt)("strong",{parentName:"p"},"\u5c07\u7248\u672c\u865f\u52a0\u5165Url"),"'\u7684\u65b9\u5f0f\u80fd\u8b93\u6211\u5011\u89e3\u6c7a\u5feb\u53d6\u4e0d\u5e38\u66f4\u65b0\u8cc7\u6e90\u53c8\u540c\u6642\u80fd\u5920\u5728\u66f4\u65b0\u6642\uff0c\u7acb\u99ac\u8b93\u700f\u89bd\u5668\u91cd\u65b0\u8ddfServer\u8acb\u6c42\uff0c\u56e0\u6b64\u5728\u73fe\u5728\u9019\u500b\u6642\u9593\u9ede\u4f3c\u4e4e\u7576\u6642\u7684\u554f\u984c\u4e5f\u4e0d\u518d\u662f\u554f\u984c\u3002"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"Cache-Control")," "),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u63d0\u4f9b\u8a31\u591aDirectives(\u6307\u4ee4)\uff0c\u53ef\u4f5c\u4e0d\u540c\u8a2d\u5b9a\u3002"),(0,n.kt)("li",{parentName:"ul"},"Directives:",(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("inlineCode",{parentName:"li"},"public"),"\u3001",(0,n.kt)("inlineCode",{parentName:"li"},"private"),(0,n.kt)("br",{parentName:"li"}),"\u5982\u5feb\u53d6\u88ab\u8a2d\u5b9a\u70baprivate\uff0c\u5247\u53ea\u80fd\u88ab\u55ae\u4e00\u4f7f\u7528\u8005\u4f7f\u7528\u4e26\u4e14\u4e0d\u80fd\u88ab\u5171\u4eab\u5feb\u53d6(\u5982: ",(0,n.kt)("a",{parentName:"li",href:"https://zh.wikipedia.org/wiki/%E5%85%A7%E5%AE%B9%E5%82%B3%E9%81%9E%E7%B6%B2%E8%B7%AF"},"CDN")," )\u5b58\u53d6\u3002",(0,n.kt)("br",{parentName:"li"}),"\u901a\u5e38\u6703\u5b58\u653e\u8207\u500b\u4eba\u8f03\u76f8\u95dc\u4e4b\u8a0a\u606f\u3002"),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("inlineCode",{parentName:"li"},"no-store"),(0,n.kt)("br",{parentName:"li"}),"\u5b8c\u5168\u4e0d\u5feb\u53d6\u8a72\u8cc7\u6e90\u3002"),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("inlineCode",{parentName:"li"},"no-cache"),(0,n.kt)("br",{parentName:"li"}),"\u548c\u540d\u7a31\u6240\u611f\u89ba\u4e4b\u610f\u601d\u4e0d\u540c\u3002",(0,n.kt)("br",{parentName:"li"}),"\u5be6\u969b\u4e0ano-cache\u6548\u679c\u70ba\u8b93\u700f\u89bd\u5668\u6bcf\u6b21\u4f7f\u7528\u8cc7\u6e90\u4e4b\u524d\uff0c\u90fd\u5fc5\u9808\u8ddfServer\u9a57\u8b49\u904e\u5f8c\u624d\u80fd\u4f7f\u7528\u3002",(0,n.kt)("br",{parentName:"li"}),"\u56e0\u6b64\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,n.kt)("inlineCode",{parentName:"li"},"must-revalidate")," \u4f86\u907f\u514d\u8aa4\u6703\u4e14\u9054\u5230\u540c\u6a23\u6548\u679c\u3002"),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("inlineCode",{parentName:"li"},"max-age"),"\x1c",(0,n.kt)("br",{parentName:"li"}),"\u548c ",(0,n.kt)("inlineCode",{parentName:"li"},"Expires"),"\u6307\u5b9a\u5931\u6548\u6642\u9593\u4e0d\u540c\uff0c ",(0,n.kt)("inlineCode",{parentName:"li"},"max-age"),"\u6307\u5b9a\u8cc7\u6e90\u5269\u4e0b\u591a\u5c11\u6642\u9593\u6703\u88ab\u7576\u4f5c ",(0,n.kt)("strong",{parentName:"li"},"stale"),"\u3002  ",(0,n.kt)("admonition",{parentName:"li",title:"\u63d0\u793a   ",type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"   ",(0,n.kt)("inlineCode",{parentName:"p"},"max-age"),"\u7684\u5c64\u7d1a\u8f03Expires\u9ad8\uff0c\u56e0\u6b64\u540c\u6642\u5b58\u5728\u6642\u6703\u4ee5",(0,n.kt)("inlineCode",{parentName:"p"},"max-age"),"\u8a2d\u5b9a\u70ba\u512a\u5148\u3002  "))))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"ETags"),"  \t "),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u70ba",(0,n.kt)("strong",{parentName:"li"},"Strong-Validator"),", \u4f7f\u7528",(0,n.kt)("inlineCode",{parentName:"li"},"ETag"),"\u9a57\u8b49\u6a94\u6848\u53ef\u4ee5\u5b8c\u5168\u78ba\u5b9a\u8cc7\u6e90\u662f\u5426\u4e00\u6a21\u4e00\u6a23\u3002"),(0,n.kt)("li",{parentName:"ul"},"\u70ba\u7528\u4f86\u78ba\u5b9a\u5feb\u53d6\u96d6\u7136\u72c0\u614b\u70bastale\uff0c\u4f46\u80fd\u5426\u7e7c\u7e8c\u4f7f\u7528\u4e4bheader\u3002"),(0,n.kt)("li",{parentName:"ul"},"\u4f3a\u670d\u5668\u6703\u6839\u64da\u8cc7\u6e90\u5167\u5bb9\u7522\u751f\u96dc\u6e4a(Hash)\u503c\u4e26\u653e\u5728Response Header\u88e1\u3002\u5982:",(0,n.kt)("br",{parentName:"li"}),(0,n.kt)("img",{alt:"ETagResponseHeader",src:a(4692).Z,width:"572",height:"255"}),(0,n.kt)("br",{parentName:"li"}),"\u7576\u518d\u6b21\u5c0d\u540c\u4e00\u8cc7\u6e90\u767c\u51fa\u8acb\u6c42\u6642\uff0c\u6703\u5c07\u8a72\u503c\u653e\u5728Request Header\u88e1\u7684 ",(0,n.kt)("inlineCode",{parentName:"li"},"if-none-match"),"\u4e00\u8d77\u9001\u5f80Server\u3002",(0,n.kt)("br",{parentName:"li"}),(0,n.kt)("img",{alt:"ETagResponseHeader",src:a(4067).Z,width:"839",height:"298"}),"\nServer\u56e0\u800c\u53ef\u4ee5\u5224\u65b7Client\u7aef\u5feb\u53d6\u8cc7\u6e90\u7684\u7248\u672c\u662f\u5426\u8207\u73fe\u5728Server\u4e0a\u8cc7\u6e90\u7248\u672c\u76f8\u540c\uff0c\u5982\u76f8\u540c\u5247\u56de\u50b3",(0,n.kt)("inlineCode",{parentName:"li"},"304 Not Modified"),"\u3002 \u5982\u5716 :    ")),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"ETagFlow",src:a(3621).Z,width:"500",height:"227"}),(0,n.kt)("br",{parentName:"p"}),"\n","Image Source : ",(0,n.kt)("a",{parentName:"p",href:"https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/e2bN6glWoVbWIcwUF1uh.png?auto=format&w=500",title:"ETag flow"},"Etag Flow"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"Last-Modified")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u70ba",(0,n.kt)("strong",{parentName:"li"},"Weak-Validator"),", \u4f7f\u7528",(0,n.kt)("inlineCode",{parentName:"li"},"Last-Modified"),"\u9a57\u8b49\u6642\u5982\u679c\u5167\u5bb9\u4e0d\u8b8a\uff0cfooter\u6216\u8005\u5982\u5ee3\u544a\u8b8a\u52d5\u4e86\u9084\u662f\u6703\u88ab\u7576\u4f5c\u4e00\u6a23\u7684\u8cc7\u6e90\u3002\u800cStrong-Validator\u5247\u6703\u8996\u70ba\u4e0d\u4e00\u6a23\u7684\u8cc7\u6e90\u3002"),(0,n.kt)("li",{parentName:"ul"},"\u70ba\u7528\u4f86\u78ba\u5b9a\u5feb\u53d6\u96d6\u7136\u72c0\u614b\u70bastale\uff0c\u4f46\u80fd\u5426\u7e7c\u7e8c\u4f7f\u7528\u4e4bheader\u3002"),(0,n.kt)("li",{parentName:"ul"},"\u548c ",(0,n.kt)("inlineCode",{parentName:"li"},"ETag"),"\u4e0d\u540c\u5728\u65bc\uff0c",(0,n.kt)("inlineCode",{parentName:"li"},"Last-Modified"),"\u4e26\u975e\u4ee5\u6a94\u6848\u5167\u5bb9\u4f86\u5224\u5b9a\uff0c\u800c\u662f\u4ee5'\u6642\u9593'\u5224\u5b9a\u6a94\u6848\u662f\u5426\u6709\u8b8a\u52d5\uff0c\u4e5f\u56e0\u6b64\u4f7f\u5f97\u5176\u70baWeak-Validator\u3002"),(0,n.kt)("li",{parentName:"ul"},"\u4f3a\u670d\u5668\u6703\u5c07\u8cc7\u6e90\u6700\u5f8c\u7570\u52d5\u6642\u9593\u653e\u5728\u6b64Response Header\u4e2d\uff0c\u63a5\u8457\u7576\u5c0d\u540c\u8cc7\u6e90\u518d\u51fa\u767c\u51fa\u8acb\u6c42\u6642\uff0c\u700f\u89bd\u5668\u6703\u5728Request Header\u4e2d\u52a0\u4e0a",(0,n.kt)("inlineCode",{parentName:"li"},"If-Modified-Since"),"\uff0c\u4f86\u8b93\u4f3a\u670d\u5668\u53ef\u4ee5\u4ee5\u6b64\u548c\u76ee\u524d\u7cfb\u7d71\u4e0a\u8a72\u8cc7\u6e90\u6bd4\u8f03\u3002  ",(0,n.kt)("admonition",{parentName:"li",title:"\u63d0\u793a   ",type:"tip"},(0,n.kt)("p",{parentName:"admonition"},(0,n.kt)("inlineCode",{parentName:"p"},"If-Modified-Since"),"\u7684\u9650\u5236\u70ba\u6700\u5c0f\u6642\u9593\u55ae\u4f4d\u70ba\u79d2\u3002\u512a\u5148\u9806\u70ba\u5c0f\u65bc ",(0,n.kt)("inlineCode",{parentName:"p"},"If-none-match"),"  ")))))),(0,n.kt)("h2",{id:"\u7d50\u8a9e"},"\u7d50\u8a9e"),(0,n.kt)("hr",null),(0,n.kt)("p",null,"\u900f\u904ehttp cache\u63d0\u4f9b\u7684\u8a31\u591aheader\uff0c\u6211\u5011\u53ef\u4ee5\u5f88\u597d\u5730\u9054\u6210\u5404\u7a2e\u9700\u6c42\u6240\u9700\u7684\u4e0d\u540c\u5feb\u53d6\u7b56\u7565\uff0c\u63d0\u5347\u7db2\u7ad9\u7684\u54c1\u8cea\u3002\u60f3\u5fc5\u5f9e\u4ee5\u524d\u5230\u73fe\u5728\u5f37\u8abf\u4f7f\u7528\u8005\u9ad4\u9a57\u7684\u6642\u4ee3\u66f4\u662f\u4e0d\u53ef\u5ffd\u7565\u7684\u4e00\u584a\u3002"),(0,n.kt)("p",null,"\u5feb\u53d6\u7684\u5167\u5bb9\u4e5f\u9060\u4e0d\u6b62\u5982\u6b64\uff0c\u6211\u60f3\u672a\u4f86\u4e5f\u6703\u518d\u627e\u6642\u9593\u91dd\u5c0d\u5176\u4ed6\u90e8\u5206\u7e7c\u7e8c\u6df1\u5165\u5b78\u7fd2\uff01"),(0,n.kt)("h3",{id:"\u63a8\u85a6\u95b1\u8b80"},"\u63a8\u85a6\u95b1\u8b80"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://cythilya.github.io/2018/07/27/http-caching/"},"HTTP Caching | Summer\u3002\u6851\u83ab\u3002\u590f\u5929"),"  "),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://www.itread01.com/content/1544784485.html"},"from memory cache\u8207from disk cache\u8a73\u89e3"))),(0,n.kt)("h3",{id:"\u53c3\u8003\u6587\u7ae0"},"\u53c3\u8003\u6587\u7ae0"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://imagekit.io/blog/ultimate-guide-to-http-caching-for-static-assets/"},"Guide for Caching and Http Cache Headers for Static Content"),"  "),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://www.mnot.net/blog/2007/05/15/expires_max-age"},"Expires vs. max-age"),"  "),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://moz.com/blog/expires-headers-for-seo-why-you-should-think-twice-before-using-them"},"Expires Headers for SEO"),"  "),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching"},"Http Caching")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Conditional_requests"},"HTTP conditional requests")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://web.dev/http-cache/"},"Prevent unnecessary network requests with the HTTP Cache"))))}s.isMDXComponent=!0},3621:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/ETagFlow-b13a04ae6377c0a0ca7e751409aff2d1.png"},4067:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/ETag_Request-c6e27ce45bc6e6e542b40a8ff05f579c.png"},4692:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/ETag_Response-dee0672120d27e163f2af9e5b057bf26.png"},7189:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/httpCache-1e0222c3a0ede5bc2f9ac5a9b1308af7.png"},8227:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/httpCacheWorkFlow-6a90059a7613aaad51863a2f286968f6.png"}}]);